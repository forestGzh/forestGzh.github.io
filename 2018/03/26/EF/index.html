<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="my blog"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>Entity Framework - Gzh Blog</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/forestGzh"><span>Github</span></a></li><li><a href="https://weibo.com/u/3832054570?refer_flag=1001030101_&amp;is_all=1"><span>Weibo</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">Entity Framework</h1><ul class="meta"><li><i class="icon icon-author"></i>Gzh</li><li><i class="icon icon-clock"></i>2 Minutes</li><li><i class="icon icon-calendar"></i>2018年3月26日</li></ul></div></div><div class="article-content" style="max-width:900px"><p>EF是ORM框架,ORM,Object Relation Mapping,对象关系型数据库映射，是面向对象的对象模型和关系型数据库的数据库结构之间的相互转换。</p>
<p>Entity Framework(实体框架)是微软以ADO.NET为基础所发展出来的对象关系对应解决方案。基于.NET开发的ORM框架有Nibernate、PetaPoco等。</p>
<p>EF利用了抽象化数据结构的方式，将每个数据库对象都转换成应用程序中的类对象(Entity)，而数据字段都转换为属性 (Property)，关系则转换为结合属性 (Association)，让数据库的 E/R 模型完全的转成对象模型，这样就能用熟悉的面向对象编程语言来调用访问。</p>
<h2 id="Entity-Framework的特点："><a href="#Entity-Framework的特点：" class="headerlink" title="Entity Framework的特点："></a>Entity Framework的特点：</h2><ul>
<li>支持多种数据库，MySQL、Oracle、SQL Server、DB2</li>
<li>强劲的映射引擎，能很好地支持存储过程。</li>
<li>提供Visual Studio集成工具，进行可视化操作。</li>
<li>能与ASP.NET、WPF、WCF、WCF Data Services进行很好的集成。</li>
</ul>
<h2 id="EF的使用"><a href="#EF的使用" class="headerlink" title="EF的使用"></a>EF的使用</h2><ul>
<li>安装Entity Framework包</li>
<li>创建连接字符串</li>
<li>创建数据访问层</li>
<li>创建Model类，添加主键</li>
<li>添加一个继承DbContext的context类，定义映射关系</li>
<li>写业务层代码，从数据库中获取数据</li>
</ul>
<h3 id="以MySQL为例，EF的使用："><a href="#以MySQL为例，EF的使用：" class="headerlink" title="以MySQL为例，EF的使用："></a>以MySQL为例，EF的使用：</h3><ul>
<li>开始安装包install-package MySql.Data.Entity、Install-Package EntityFramework -Version 6.0.0</li>
<li><p>添加Model实体类</p>
</li>
<li><p>添加一个继承DbContext的连接上下文类，并在类上添加DbConfigurationType属性，[DbConfigurationType(typeof(MySqlEFConfiguration))]，在这个类中配置连接字符串和数据库表的一些规则以及初始化等。</p>
</li>
<li><p>配置web.config，添加<connectionstrings></connectionstrings>，connectionString中的providerName=”MySql.Data.MySqlClient”。 如果用sqlserver或其他数据库的连接，导入相应的包，换连接与providerName。</p>
</li>
<li><p>输入命令与验证，程序包管理器控制台输入：enable-migration //启用迁移   add-migration init //迁移命名 update-database //更新数据库</p>
</li>
</ul>
<h3 id="数据访问层和数据库之间的映射通过名称实现的，ConnectionString（连接字符串）的名称和数据访问层的类名称是相同的，因此会自动实现映射。"><a href="#数据访问层和数据库之间的映射通过名称实现的，ConnectionString（连接字符串）的名称和数据访问层的类名称是相同的，因此会自动实现映射。" class="headerlink" title="数据访问层和数据库之间的映射通过名称实现的，ConnectionString（连接字符串）的名称和数据访问层的类名称是相同的，因此会自动实现映射。"></a>数据访问层和数据库之间的映射通过名称实现的，ConnectionString（连接字符串）的名称和数据访问层的类名称是相同的，因此会自动实现映射。</h3><h2 id="EF开发方式"><a href="#EF开发方式" class="headerlink" title="EF开发方式"></a>EF开发方式</h2><ul>
<li><p>Database First：数据库优先</p>
</li>
<li><p>Model First ：模型优先</p>
</li>
<li><p>Code First：代码优先</p>
</li>
</ul>
<h2 id="EF查询方式"><a href="#EF查询方式" class="headerlink" title="EF查询方式"></a>EF查询方式</h2><ul>
<li>DbSet</li>
<li>LINQ</li>
<li>SQL语句</li>
</ul>
<h2 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h2><ul>
<li><p>启用迁移<br>运行Enable-Migrations，会添加Migrations文件夹，里面的Configuration类是配置迁移行为的。</p>
</li>
<li><p>生成并运行迁移<br>Add-Migration<br>Update-Database</p>
</li>
</ul>
</div><div class="article-meta" style="max-width:900px"></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2018/03/22/MVCshujvchandi/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/forestGzh" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/u/3832054570?refer_flag=1001030101_&amp;is_all=1" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="https://www.segmentfault.com" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2018 Gzh Blog<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>